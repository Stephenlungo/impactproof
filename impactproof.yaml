project:
  name: "ImpactProof Local Run"

input:
  mode: "csv"
  csv:
    file: "data/sample.csv"

standardization:
  id_fields:
    entity_id: "learner_id"
  date_field: "encounter_date"
  missing_labels:
    na_values: ["", " ", "N/A", "NA", "na", "n/a", null]
    no_values: ["NO", "No", "no", "FALSE", "False", "false", "0"]
    unknown_values: ["UNKNOWN", "Unknown", "unknown", "Not sure", "NOT_SURE"]

checks:
  completeness:
    required_fields: ["learner_id", "encounter_date", "school"]
    pass_threshold: 0.95   # % of rows that must be complete for PASS
    warn_threshold: 0.85   # below pass, above warn => WARN, below warn => FAIL

  duplicates:
    keys: ["learner_id", "encounter_date"]
    pass_threshold: 0.00   # % duplicate rows allowed for PASS
    warn_threshold: 0.02   # <=2% duplicates => WARN, above => FAIL
  
  consistency:
    rules:
      - name: "CompletedRequiresFollowupDate"
        when:
          field: "outcome"
          equals: "Completed"
        then_required: ["followup_date"]

      - name: "ReferralNoMeansFacilityNA"
        when:
          field: "referral"
          equals: "NO"
        then_equals:
          referral_facility: "NA"

  drift:
    date_field: "encounter_date"
    period: "monthly"          # monthly | weekly (monthly for MVP)
    baseline_periods: 2        # how many previous periods to compare against
    warn_pct_change: 0.30      # 30%
    fail_pct_change: 0.50      # 50%

output:
  mode: "csv"
  path: "outputs/"